(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function c(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=c(e);fetch(e.href,t)}})();(()=>{const d=window;if(d.__CHATBOT_WIDGET_LOADED__)return;d.__CHATBOT_WIDGET_LOADED__=!0;let s=[];const c=document.createElement("button");c.id="cbw-button",c.innerHTML="ðŸ’¬";const o=document.createElement("div");o.id="cbw-modal",o.innerHTML=`
    <div id="cbw-header">
      AI Assistant
      <button id="cbw-close">Ã—</button>
    </div>
    <div id="cbw-messages"></div>
    <div id="cbw-input">
      <input type="text" placeholder="Type a message..." />
      <button>Send</button>
    </div>
  `,document.body.appendChild(c),document.body.appendChild(o);const e=o.querySelector("#cbw-messages"),t=o.querySelector("input"),a=o.querySelector("#cbw-input button"),h=o.querySelector("#cbw-close");let l=!1;c.onclick=()=>{l=!l,l?(o.classList.add("open"),c.classList.add("cbw-bounce"),setTimeout(()=>c.classList.remove("cbw-bounce"),600)):o.classList.remove("open")},h.onclick=()=>{l=!1,o.classList.remove("open")};function u(r,n){const i=document.createElement("div");i.className=`cbw-msg cbw-${n}`,i.textContent=r,e.appendChild(i),e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}async function f(){const r=t.value.trim();if(!r)return;u(r,"user"),t.value="",s.push({role:"user",content:r}),s.length>10&&(s=s.slice(-10));const n=document.createElement("div");n.className="cbw-msg cbw-typing",n.innerHTML='Typing<span class="cbw-dot"></span><span class="cbw-dot"></span><span class="cbw-dot"></span>',e.appendChild(n),e.scrollTo({top:e.scrollHeight,behavior:"smooth"});try{const p=(await(await fetch("/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,history:s,clientId:"76e475d8-adcf-425e-8c6e-7c77eabc50fa"})})).json()).answer||"Sorry, I encountered an error.";n.parentNode&&e.removeChild(n),s.push({role:"assistant",content:p});const m=document.createElement("div");m.className="cbw-msg cbw-bot",e.appendChild(m),e.scrollTo({top:e.scrollHeight,behavior:"smooth"});let b=0;const y=setInterval(()=>{m.textContent+=p[b],b++,e.scrollTo({top:e.scrollHeight,behavior:"smooth"}),b>=p.length&&clearInterval(y)},20)}catch(i){n.parentNode&&e.removeChild(n),u("Error connecting to server.","bot"),console.error(i)}}a.onclick=f,t.addEventListener("keydown",r=>{r.key==="Enter"&&f()}),u("Hi! How can I help you today?","bot")})();
